var searchFunc=function(t,e,r){$.ajax({url:t,dataType:"xml",success:function(t){var n=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("link",this).attr("href")}}).get(),i=document.getElementById(e);if(i){var l=document.getElementById(r);i.addEventListener("input",function(){var t=[],e=function(t){var e,r,n=[];for(e=0;e<t.length;e++)for(r=e+1;r<t.length+1;r++)n.push(t.slice(e,r).join(" "));return n}(this.value.trim().toLowerCase().split(" ")).sort(function(t,e){return e.split(" ").length-t.split(" ").length});if(l.innerHTML="",!(this.value.trim().length<=0)){n.forEach(function(r){var n=0;r.title&&""!==r.title.trim()||(r.title="Untitled");var i=r.title.trim().toLowerCase(),l=function(t){return t=t.replace(/<style([\s\S]*?)<\/style>/gi,""),t=t.replace(/<script([\s\S]*?)<\/script>/gi,""),t=t.replace(/<figure([\s\S]*?)<\/figure>/gi,""),t=t.replace(/<\/div>/gi,"\n"),t=t.replace(/<\/li>/gi,"\n"),t=t.replace(/<li>/gi,"  *  "),t=t.replace(/<\/ul>/gi,"\n"),t=t.replace(/<\/p>/gi,"\n"),t=t.replace(/<br\s*[\/]?>/gi,"\n"),t=t.replace(/<[^>]+>/gi,"")}(r.content.trim()),s=r.url,a=-1,c=-1,u=-1;if(""!==l&&e.forEach(function(t,e){a=i.indexOf(t),c=l.indexOf(t),(a>=0||c>=0)&&(n+=1,c<0&&(c=0),u<0&&(u=c))}),n>0){var o={};if(o.rank=n,o.str="<li><a href='"+s+"' class='search-result-title'>"+i+"</a>",u>=0){var f=u-20,g=u+80;f<0&&(f=0),0==f&&(g=100),g>l.length&&(g=l.length);var p=l.substr(f,g),h=new RegExp(e.join("|"),"gi");p=p.replace(h,function(t){return'<em class="search-keyword">'+t+"</em>"}),o.str+='<p class="search-result">'+p+"...</p>"}o.str+="</li>",t.push(o)}}),t.sort(function(t,e){return e.rank-t.rank});for(var r='<ul class="search-result-list">',i=0;i<t.length;i++)r+=t[i].str;r+="</ul>",l.innerHTML=r}})}}})};